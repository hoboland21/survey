{% extends "base/base.html" %}
{% load static %}

{% block body_main %}
<div class="row">
    <div class="col-md-3">
        <p>Survey</p>

        <form method="POST">
            {% csrf_token %}
            <select name="survey_select" >
                <option value="null">--Select a Survey--</option>
                {% for s in survey_list %}
                <option value="{{s.id}}"
                {% if sclass.survey.id == s.id %} selected {% endif %}
                >{{s.name}} - {{s.subject}} - {{s.label}} </option>
                
                {% endfor %}
                <option value="new">--Create A New Survey--</option>

            </select>
            <button>Go</button>
        </form>

        <br>
        {% if sclass.survey_form %}
            <form method="POST">
                {% csrf_token %}
                <table >
                {{ sclass.survey_form.as_table }}
                <tr>
                    <td>
                    {% if not sclass.survey %}
                        <button name="create_survey">Create a new Survey</button></td>
                    {% endif %}
                    
                    
                    <td></td>
                </tr>
                </table>
            </form>
        {% endif %}

    </div>

    <div class="col-md-9">

    {% if sclass.questions %}

    <select name="qaction" id="">
        <option value="noop">--select action--</option>
        <option value="delete">Delete Marked</option>
    </select>
     <button>Go</button>
    <div style="height:300px;overflow:scroll" >
        <form method="POST">
            {% csrf_token %}
                {% for q in  sclass.questions %}
                    <div><input type="checkbox" name="qlist" value="{{q.id}}">{{q.question}}</div>
                {% endfor %}
            <input type="hidden" name="survey" value="{{sclass.survey.id}}">
        </form>
    </div>
    {% endif %}
    </div>

</div>   


{% if sclass.survey.id %}
<hr>
<div>
    <button name="add_selected" type="submit" value={{ layout.id }}>Add Selected Questions</button>
</div>

<div style="height:300px; overflow:scroll" class="row">
    <div class="col-md-4">
        <form method="POST">
            {% csrf_token %}
            <h3>Question</h3>
            <div> 
                {% for q  in qlabels %}
                    <div>
                        <input type="checkbox" name="qlabel_list" value="{{ q.label }}">
                        <button name="label_select" value="{{ q.label}}">{{q.label}}</button>
                    </div>
                {% endfor %}
                 <input type="hidden" name="survey" value="{{sclass.survey.id}}">
                 <input type="hidden" name="last_label_select" value="{{label_select}}">
            </div> 
        </form>
    </div>
    <div class="col-md-4">
        {% for i in q.questions %}
            <div><input type="checkbox" name="qlist" > {{ i.question }}</div>
        {% endfor %} 
    </div>

    <div class="col-md-4">
        <form method="post" enctype="multipart/form-data">
            {% csrf_token %}
            {{ question_upload_form.as_p }}
            <button type="submit"  name="upload_file">Upload</button>
            
            {% if sclass %}
                <input type="hidden" name="survey" value="{{sclass.survey.id}}">
            {% endif %}
        </form>
    </div>
</div>
{% endif %}


{% endblock %}